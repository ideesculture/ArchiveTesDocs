{% extends '::base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('/css/bootstrap-table.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('/css/dragable.css') }}" type="text/css" rel="stylesheet" />
    <link href="{{ asset('/css/datepicker.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block overlay %}
        <div class="overlay" id="waitAjax"><br/><br/><br/>
            <div class="panel panel-default col-sm-6 col-sm-offset-3">
                <div class="panel-body text-default">
                    <i class="fal fa-spinner fa-spin fa-3x fa-fw"></i>
                    <span >{{ translations[88] }}</span>
                    <div class="text-info" id="textopti">&nbsp;</div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="modalErrorMessage">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times</span>
                    </button>
                    <h4 class="modal-title" id="errorTitle">{{ translations[1] }}</h4>
                </div>
                <div class="modal-body">
                    <p id="errorMsg">{{ translations[2] }}</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ translations[3] }}</button>
                </div>
            </div>
        </div>
    </div>

    {% include "bsIDPArchiveBundle:Default:partial.overlay.viewArchive.html.twig" %}

    <div class="modal fade" id="SuppressModal" tabindex="-1" role="dialog" aria-labelledby="suppressModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="suppressModalLabel">{{ translations[4] }}</h4>
                </div>
                <div class="modal-body" id="SuppressModalText">
                    {{ translations[5] }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ translations[6] }}</button>
                    <button type="button" class="btn btn-primary" id="btnSuppressModalConfirm">{{ translations[7] }}</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block content %}

    <div class="modal fade" id="ConfirmModal" tabindex="-1" role="dialog" aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="confirmModalLabel">{{ translations[8] }}</h4>
                </div>
                <div class="modal-body" id="confirmModalText">
                    {{ translations[9] }}
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">{{ translations[10] }}</button>
                    <button type="button" class="btn btn-primary" id="btnConfirmModalConfirm">{{ translations[11] }}</button>
                </div>
            </div>
        </div>
    </div>


    <div id="ajaxInfo" class="alert alert-warning hidden"></div>
    <div id="ajaxError" class="alert alert-danger hidden"></div>

    <div id="btnstates" class="btn-group btn-group-justified mb5" role="group">
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs active" id="btnwhat_transfer">{{ translations[12] }}</button></div>
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs" id="btnwhat_deliver">{{ translations[13] }}</button></div>
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs" id="btnwhat_return">{{ translations[14] }}</button></div>
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs" id="btnwhat_exit">{{ translations[15] }}</button></div>
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs" id="btnwhat_destroy">{{ translations[16] }}</button></div>
        <div class="btn-group" role="group"><button type="button" class="btn btn-info btn-xs" id="btnwhat_reloc">{{ translations[17] }}</button></div>
    </div>

    <div class="col-xs-6 mb5" id="btnwherehow">
        <div id="btnwhere" class="btn-group btn-group-justified" role="group">
            <div class="btn-group" role="group"><button type="button" class="btn btn-success btn-xs active" id="btnwhere_provider">{{ translations[18] }}</button></div>
            <div class="btn-group" role="group"><button type="button" class="btn btn-success btn-xs " id="btnwhere_intermediate">{{ translations[19] }}</button></div>
            <div class="btn-group" role="group"><button type="button" class="btn btn-success btn-xs " id="btnwhere_internal">{{ translations[20] }}</button></div>
        </div>
        <div id="btnhow" class="btn-group btn-group-justified hidden" role="group">
            <div class="btn-group" role="group"><button type="button" class="btn btn-success btn-xs active" id="btnhow_withoutprepare">{{ translations[21] }}</button></div>
            <div class="btn-group" role="group"><button type="button" class="btn btn-success btn-xs " id="btnhow_withprepare">{{ translations[22] }}</button></div>
        </div>
        <div id="btnnothing" class="hidden" >&nbsp;</div>
    </div>

    <div class="col-xs-6 mb5" id="selectproviderfilter">
        <div class="col-sm-4 mb1" id="divLblFilterprovider"><label class="control-label" for="filter_provider">{{ translations[89] }}</label></div>
        <div class="col-sm-6 mb1" id="divSelectFilterprovider"><select id="filter_provider" name="filter[provider]" class="form-control"></select></div>
    </div>

    <div class="col-xs-6 mb5" >&nbsp;</div>

    <div class="row" id="tabCloseUserWants">

        <div class="col-xs-9" id="list">
            <div id="tabletoolbar" class="columns columns-left">
                <button type="button" class="btn btn-default" id="divCheckAll" data-toggle="tooltip" title="Sélectionner la page"><i class="fal fa-check"></i></button>
                <button type="button" class="btn btn-default" id="divUncheckAll" data-toggle="tooltip" title="Désélectionner la page"><i class="fal fa-check-square"></i></button>
                <button type="button" class="btn btn-default" id="divExport" data-toggle="tooltip" title="{{ translations[23] }}"><i class="fal fa-file-alt"></i></button>
                <button type="button" class="btn btn-default" id="divExportPartial" data-toggle="tooltip" title="{{ translations[87] }}"><i class="fal fa-clipboard-list"></i></button>
                <button type="button" class="btn btn-default" id="divPrintList" data-toggle="tooltip" title="{{ translations[24] }}"><i class="fal fa-print"></i></button>
                <button type="button" class="btn btn-default" id="divPrintPartialList" data-toggle="tooltip" title="{{ translations[86] }}"><i class="fal fa-tasks"></i></button>
            </div>
            <table id="listarchives">
            </table>

        </div>

        <div class="col-xs-3">
            <ul class="nav nav-tabs" role="tablist" id="subtabmenu">
                <li role="presentation" class="active"><a href="#tabmore" role="tab" data-toggle="tab" id="titleAction">{{ translations[25] }}</a></li>
            </ul>
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="tabmore">
                    <div class="panel panel-default" id="askAction">
                        <div class="panel-heading">
                            <button type="button" class="btn btn-info disabled" id="addToAction"><i class="far fa-plus"></i></button>
                            <b><span class="text-info" id="textDoAction">&nbsp;&nbsp;&nbsp;{{ translations[26] }}</span></b>
                            <button type="button" class="btn btn-danger pull-right disabled" id="clearAction"><i class="far fa-times"></i></button>
                        </div>
                        <div class="panel-body" id="doAction">
                            <table id="table-action" ></table>
                        </div>
                    </div>

                    <button type="button" class="btn btn-info btn-block disabled" id="btnAction" >{{ translations[27] }}</button>
                    <br/>
                </div>
            </div>
        </div>

    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        var JSON_URLS = {
            bs_idp_archivist_json_loaddatas: "{{ path('bs_idp_archivist_json_loaddatas')}}",
            bs_idp_archive_delete_ajax: "{{ path('bs_idp_archive_delete_ajax')}}",
            bs_idp_archive_form_initlists: "{{ path('bs_idp_archive_form_initlists')}}",
            bs_idp_archive_modify_ajax: "{{ path('bs_idp_archive_modify_ajax')}}",
            bs_idp_archivist_json_action: "{{ path('bs_idp_archivist_json_action')}}",
            bs_idp_archivist_json_cancel: "{{ path('bs_idp_archivist_json_cancel')}}",
            bs_idp_archive_view: '{{ path( "bs_idp_archive_view")}}',
            bs_idp_archive_export: '{{ path( "bs_idp_archive_export")}}',
            bs_idp_archive_export_offline: '{{ path("bs_idp_archive_export_offline") }}',
            bs_idp_export_all_offline: '{{ path("bs_idp_export_all_offline") }}',
            bs_idp_backoffice_ajax_settings: '{{  path("bs_idp_backoffice_ajax_settings") }}',
            bs_idp_backoffice_ajax_usersettings_get: '{{ path("bs_idp_backoffice_ajax_usersettings_get") }}',
            bs_idp_backoffice_usersettings_modify_page: '{{ path("bs_idp_backoffice_usersettings_modify_page") }}',
            bs_idp_backoffice_usersettings_modify_column: '{{ path("bs_idp_backoffice_usersettings_modify_column") }}',
            bs_idp_backoffice_usersettings_modify_column_order: '{{ path("bs_idp_backoffice_usersettings_modify_column_order") }}',
            bs_idp_archivist_json_is_basket_verified: '{{ path("bs_idp_archivist_json_is_basket_verified") }}',
            bs_idp_archive_print_table: '{{ path("bs_idp_archive_print_table") }}',
            bs_idp_archive_print_table_offline: '{{ path("bs_idp_archive_print_table_offline") }}',
            bs_idp_archive_print_sheet: '{{ path("bs_idp_archive_print_sheet") }}',
            bs_idp_archivist_json_allowed_providers: '{{ path("bs_idp_archivist_json_allowed_providers") }}',
            bs_core_userspace_userfile_viewmainscreen: '{{ path("bs_core_userspace_userfile_viewmainscreen") }}'

        };
        var IDP_CONST = {
            bs_idp_current_page: 9,
            bs_idp_commonsettings: '{{commonsettings|json_encode|escape('js')|raw}}',
            bs_translations: '{{translations|json_encode|escape('js')|raw}}',
            bs_overlay: '{{ overlay|json_encode|escape('js')|raw }}',
            bs_tabletranslation: '{{ tableTranslations|json_encode|escape('js')|raw }}'
        };
    </script>

    <script src="{{ asset('/js/bootstrap-table.1.15.2.js') }}"></script>
    {% if language == 0  %}
        <script src="{{ asset('/js/bootstrap-table-fr-FR.js') }}"></script>
    {% endif %}
    <script src="{{ asset('/js/jquery.dragable.js') }}"></script>
    <script src="{{ asset('/js/bootstrap-table-reorder-columns.1.15.2.js') }}"></script>
    <script src="{{ asset('/js/bootstrap-datepicker.js') }}"></script>
    {% javascripts
        '@bsIDPArchiveBundle/Resources/public/js/IDPConstants.1.1.6.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/systemPostGetDef.0.9.10.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPPrint.1.4.5.0.js'
        '@bsIDPBackofficeBundle/Resources/public/js/IDPUserSettingsManagement.1.2.0.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPArchiveOverlayView.1.4.5.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPArchivistException.1.4.5.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPArchiveSelectionMng.1.1.8.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPPartialCheckTab.1.4.5.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPExport.1.4.5.0.js'
        '@bsIDPArchiveBundle/Resources/public/js/IDPArchivistClose.1.4.5.0.js'
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}