{% extends '::base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('/css/bootstrap-table.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}

{% block overlay %}
{% endblock %}

{% block content %}

    {% set menuaction = 1 %}
    {% set submenuaction = 9 %}
    {% include "bsIDPArchiveBundle:Archivist:partial.menumanagedb.html.twig" %}

    <ol class="breadcrumb">
        <li><a href="{{ path('bs_idp_archivist_managedb_input_services')}}">{{ partialmenuTranslations[13] }}</a></li>
        <li><a href="{{ path('bs_idp_archivist_managedb_input_services')}}">{{ partialmenuTranslations[1] }}</a></li>
        <li><a href="{{ path('bs_idp_archivist_managedb_input_localizations', { 'offset': pageOffset, 'sortASC': sortASC })}}">{{ partialmenuTranslations[14] }}</a></li>
        <li class="active">{{ translations[2] }}</li>
    </ol>

    <div id="prevNext" class="col-xs-12 mb5">
        <div id="prev" class="col-xs-4 text-left">
            {% if pagePrevNext.previous.id != null %}
                <a href="{{ path('bs_idp_archivist_managedb_input_localizations_finetune',
                    {'localizationId': pagePrevNext.previous.id,
                        'pageOffset': pageOffset - 1,
                        'sortASC': sortASC }) }}">
                    <i class="fal fa-arrow-alt-left"></i> {{ pagePrevNext.previous.longname }}</a>
            {% else %}
                &nbsp;
            {% endif %}
        </div>
        <div id="current" class="col-xs-4 text-center">
            <p><strong>{{ pagePrevNext.current.longname }}</strong></p>
        </div>
        <div id="next" class="col-xs-4 text-right">
            {% if pagePrevNext.next.id != null %}
                <a href="{{ path('bs_idp_archivist_managedb_input_localizations_finetune',
                    {'localizationId': pagePrevNext.next.id,
                        'pageOffset': pageOffset + 1,
                        'sortASC': sortASC }) }}">
                    {{ pagePrevNext.next.longname }} <i class="fal fa-arrow-alt-right"></i></a>
            {% else %}
                &nbsp;
            {% endif %}
        </div>
    </div>

    <div class="clearfix">&nbsp;</div>

    <div class="overlay" id="waitAjax"><br/><br/><br/><center>
            {{ translations[1] }}
        </center></div>

    <div class="panel panel-default mb10">
        <div class="panel-heading">Localisation : <b>{{ localization.longname }}</b></div>
    </div>

    <div class="panel panel-default" id="panelFinetune">
        <div class="panel-heading">Définition du logo</div>
        <div class="panel-body">
            <div class="col-sm-6" id="LogoDiv">
                {% if localization.logo == null %}
                    Aucun logo n'est configuré pour le moment
                {% else %}
                    <img class="logo" src="/img/providers/{{ localization.logo }}" />
                {% endif %}
            </div>
            <div class="col-sm-6">
                <form id="LogoForm" name="logoform" method="post">
                    <input type="hidden" name="localizationId" value="{{ localization.id }}"/>
                    <div class="col-sm-12 mb5"><input type="file" id="logoInputFile" name="LogoInputFile" class="form-control"/></div>
                    <div class="col-sm-12"><button type="submit" id="sendLogoBtn" name="SendLogoBtn" class="btn btn-primary">Envoyer le logo</button></div>
                </form>
            </div>
        </div>
    </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        var IDP_DATA = {
            idp_localization_id: "{{ localization.id }}"
        };
        var ARCHIVIST_JSON_URLS = {
            bs_idp_archivist_json_localizations_change_logo: "{{ path('bs_idp_archivist_json_localizations_change_logo') }}"
        };
        var JSON_URLS = {
            bs_core_userspace_userfile_viewmainscreen: '{{ path("bs_core_userspace_userfile_viewmainscreen") }}',
            bs_idp_export_all_offline: '{{ path("bs_idp_export_all_offline") }}',
        };
        var IDP_CONST = {
            bs_translations: '{{translations|json_encode|escape('js')|raw}}'
        };
    </script>

    {% include "bsIDPArchiveBundle:Archivist:partial.javascriptconstant.html.twig" %}

    <script src="{{ asset('/js/bootstrap-table.1.15.2.js') }}"></script>
    {% if language == 0 %}
        <script src="{{ asset('/js/bootstrap-table-fr-FR.js') }}"></script>
    {% endif %}
    {% javascripts
    '@bsIDPArchiveBundle/Resources/public/js/IDPMenuManageDB.0.9.10.js'
    '@bsIDPArchiveBundle/Resources/public/js/IDPManageDBLocalizationsFinetune.0.7.0.js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}